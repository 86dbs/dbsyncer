<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" lang="zh-CN">

<div class="container">
    <form class="form-horizontal" role="form">
        <div class="row text-center">
            <div class="page-header">
                <h3>授权许可</h3>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">授权Key</label>
            <div class="col-sm-4">
                <input type="text" class="form-control" readonly="readonly" th:value="${key}"/>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <form id="uploadForm" class="form-horizontal" role="form">
                    <div class="form-group">
                        <div class="file-loading">
                            <input id="fileLicense" type="file" name="files" multiple="multiple" />
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    $("#fileLicense").fileinput({
        theme: 'fas',
        language: 'zh',
        uploadUrl: $basePath + '/license/upload',
        enctype: 'multipart/form-data',
        removeFromPreviewOnError: true, //当选择的文件不符合规则时，例如不是指定后缀文件、大小超出配置等，选择的文件不会出现在预览框中，只会显示错误信息
        minFileCount: 1, //每次多次上载允许的最小文件数。如果设置为0，则表示文件数是可选的
        maxFileCount: 1, //表示允许同时上传的最大文件个数 如果设置为0，则表示允许的文件数不受限制
        showUpload: true,//不展示上传按钮
        validateInitialCount: true,//是否在验证minFileCount和包含初始预览文件计数（服务器上载文件）maxFileCount
    }).on("fileuploaded", function (event, data, previewId, index) {
        if (!data.response.success) {
            bootGrowl(data.response.resultValue, "danger");
        }
        doLoader("/license");
    });
</script>
</html>