<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" lang="zh-CN">

<div th:fragment="content">
    <!-- 插件配置标题 -->
    <p><i class="fa fa-plug text-primary"></i> 插件配置</p>
    <p class="text-xs text-tertiary">插件配置允许您使用自定义插件扩展同步功能，选择合适的插件后，可在参数框中配置插件所需的参数，推荐使用JSON格式。</p>

    <!-- 插件配置表单 -->
    <div class="form-grid-2" style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
        <!-- 插件选择 -->
        <div class="form-item">
            <label class="form-label">
                <i class="fa fa-plug" style="color: var(--primary-color); margin-right: 4px;"></i>
                插件
            </label>
            <div class="form-control-area">
                <select id="pluginId" name="pluginId" class="form-control">
                    <option value="" selected="selected">无</option>
                    <option th:value="${p?.className +'_'+ p?.version}" 
                            th:text="${p?.name +'_'+ p?.version}" 
                            th:each="p,state : ${plugin}" 
                            th:selected="${tableGroup eq null and p.className eq mapping?.plugin?.className or p.className eq tableGroup?.plugin?.className}">
                    </option>
                </select>
            </div>
        </div>

        <!-- 插件参数 -->
        <div id="pluginExtInfo" class="form-item hidden">
            <label class="form-label">
                <i class="fa fa-code" style="color: var(--success-color); margin-right: 4px;"></i>
                参数
                <i class="fa fa-question-circle" 
                   style="color: var(--text-tertiary); margin-left: 4px; cursor: help;" 
                   title="用于插件内部使用，推荐填写JSON格式"></i>
            </label>
            <div class="form-control-area">
                <input name="pluginExtInfo" 
                       class="form-control" 
                       type="text"
                       maxlength="512" 
                       placeholder="请输入插件参数（JSON格式）"
                       th:value="${tableGroup eq null ? mapping?.pluginExtInfo : tableGroup?.pluginExtInfo}" />
            </div>
        </div>
    </div>

</div>

</html>