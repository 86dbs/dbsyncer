<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      lang="zh-CN">

<div class="container">
    <form id="uploadForm" class="form-horizontal" role="form">
        <div class="row text-center">
            <h3>上传插件</h3>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label">插件 <strong class="driverVerifcateRequired">*</strong></label>
            <div class="col-sm-10">
                <input id="formFile" type="file" accept="application/zip" name="file" dbsyncer-valid="require" multiple="multiple" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-2 control-label"></label>
            <div class="col-sm-10">
                <button id="subBtn" type="button" class="btn btn-default">
                    <span class="fa fa-arrow-circle-o-up"></span>上传
                </button>
            </div>
        </div>

        <div class="form-group">
            <div class="file-loading">
                <input id="file-5" class="file" type="file" multiple data-preview-file-type="any" data-upload-url="#" data-theme="fas">
            </div>
        </div>
    </form>
</div>

<script type="text/javascript">
    $("#subBtn").click(function(){
        var $form = $("#uploadForm");
        if (!$form.formValidate()) {
            return;
        }

        var data = new FormData();
        // 获取文件框中的数据
        var files = document.getElementById("formFile").files[0];
        console.log(files);
        // 将文件数据添加至表单数据对象中
        data.append("files", files);
        $.ajax({
            url:'/upload/upload',
            type:'POST',
            data: data,
            processData : false, // 使数据不做处理
            contentType : false, // 不要设置Content-Type请求头
            mimeType : 'multipart/form-data',
            dataType: 'json',
            success: function(data){
                console.log(data);
                if (data.success == true) {
                    bootGrowl(data.resultValue, "success");
                } else {
                    bootGrowl(data.resultValue, "danger");
                }
            }
        });
    })
</script>
</html>