<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org" lang="zh-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>dbsyncer</title>
<link type="image/x-icon" rel="icon" th:href="@{/img/logo.ico}"/>
<link type="text/css" rel="stylesheet" th:href="@{/css/login/login.css}"/>
<!-- 早期URL处理：在页面加载的最早期阶段清除哈希参数和多余的历史记录 -->
<script type="text/javascript">
    // 立即执行函数，在页面加载的最早期阶段运行
    (function() {
        // 1. 检查并清除URL中的哈希参数
        if (window.location.hash) {
            // 构建干净的登录页面URL
            var cleanUrl = window.location.protocol + '//' + window.location.host + window.location.pathname;
            // 重定向到干净的URL，替换当前历史记录
            window.location.replace(cleanUrl);
            return;
        }
        
        // 2. 清除多余的浏览器历史记录
        // 当登录页面是浏览器历史记录的最新条目时，清除所有之前的历史记录
        // 这样用户只能回退到浏览器的初始页面
        if (window.history && window.history.length > 1) {
            // 使用replaceState修改当前历史记录条目
            window.history.replaceState(null, null, window.location.href);
            // 添加一个新的历史记录条目，与当前URL相同
            window.history.pushState(null, null, window.location.href);
            // 监听popstate事件，当用户点击回退按钮时
            window.addEventListener('popstate', function() {
                // 检查是否回到了第一个历史记录条目
                if (window.history.state === null) {
                    // 再次添加一个历史记录条目
                    window.history.pushState(null, null, window.location.href);
                }
            });
        }
    })();
</script>
</head>
<body></body>
<script th:if="${enableCDN}" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script th:if="${!enableCDN}" th:src="@{/plugins/js/jquery/jquery-1.11.3.min.js}"></script>
<script th:src="@{/plugins/js/placeholder/jquery.placeholder.js}"></script>
<!-- 上述1个js文件解决IE10以上placeholder的兼容性问题 -->
<script th:src="@{/js/login/login.js}"></script>
</html>